{% extends "base.html" %}

{% block content %}

    <div class="content-container container">
        <p class="hexlist-title">Hexlist</p>
        <p>{{ hex_name }}</p>
        {% if add_more_links %}
            <p><a href="" class="add_more_links">add more links</a></p>
        {% endif %}
        {% for hexlink in hexlinks %}
            <p><a href="{{ hexlink.url }}">
            {% if hexlink.description %}
               {{ hexlink.url }}
            {% elif hexlink.web_page_title %}
               {{ hexlink.web_page_title }}
            {% else %}
               {{ hexlink.url }}
            {% endif %}
            </a></p>
        {% endfor %}

        {% if form %}
          <div class="col-xs-12">
            <form action="/internal/form_make_or_claim_user_and_claim_hex/{{ hex_id }}" method="POST" name="link_submit">
              <div class="input-container form-group col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4">
                {{ form.hidden_tag() }}
                {{ form.username(class="form-control") }}
              </div>
              <div class="input-container form-group col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4">
                <div class="col-xs-6 nopadding-left lesspadding-right">
                  {{ form.password(class="form-control") }}
                </div>
                <div class="col-xs-6 nopadding-right lesspadding-left">
                  {{ form.password_two(class="form-control") }}
                </div>
              </div>
              <div class="col-xs-12 center-block">
                <button type="submit" class="btn btn-default center-block">claim hex</button>
              </div>
            </form>
          </div>
        {% elif textarea_form %}
            <div class="col-xs-12">
              <form action="/internal/form_add_links_to_hex/{{ hex_id }}" method="POST" name="link_submit">
                <div class="input-container form-group col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
                  {{ textarea_form.hidden_tag() }}
                  {{ textarea_form.links(class="form-control",rows="20") }}
                </div>
                <div class="col-xs-12 center-block">
                  <button type="submit" class="btn btn-default center-block">add links</button>
                </div>
              </form>
            </div>
        {% endif %}

        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div class=flashes>
            {% for message in messages %}
              <p>{{ message }}</p>
            {% endfor %}
            </div>
          {% endif %}
        {% endwith %}
    </div>

    {% if should_scroll %}
        <script>
            $('html, body').animate({
                scrollTop: $(document).height()
            }, 'slow');
        </script>
    {% endif %}

    <script>
        $('.add_more_links').click(function () {
            $('html, body').animate({
                scrollTop: $(document).height()
            }, 'slow');
            return false;
        });
    </script>

{% endblock %}