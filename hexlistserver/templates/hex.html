{% extends "base.html" %}

{% block content %}

    <div class="content-container">
        <p class="hexlist-title">Hexlist</p>
        <p>{{ hex_name }}</p>
        {% if add_more_links %}
            <p><a href="" class="add_more_links">add more links</a></p>
        {% endif %}
        {% for hexlink in hexlinks %}
            <p><a href="{{ hexlink.url }}">
            {% if hexlink.description %}
               {{ hexlink.url }}
            {% elif hexlink.web_page_title %}
               {{ hexlink.web_page_title }}
            {% else %}
               {{ hexlink.url }}
            {% endif %}
            </a></p>
        {% endfor %}

        {% if form %}
            <form action="/internal/form_make_or_claim_user_and_claim_hex/{{ hex_id }}" method="POST" name="link_submit">
              <div class="input-container">
                {{ form.hidden_tag() }}
                {{ form.username }}
                {{ form.password }}
                {{ form.password_two }}
                <p><input type="submit" value="claim hex"></p>
              </div>
            </form>
        {% elif textarea_form %}
            <form action="/internal/form_add_links_to_hex/{{ hex_id }}" method="POST" name="link_submit">
              <div class="input-container">
                {{ textarea_form.hidden_tag() }}
                <div class="hex_page">
                {{ textarea_form.links }}
                <p><input type="submit" value="add links"></p>
              </div>
            </form>
        {% endif %}

        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div class=flashes>
            {% for message in messages %}
              <p>{{ message }}</p>
            {% endfor %}
            </div>
          {% endif %}
        {% endwith %}
    </div>

    {% if should_scroll %}
        <script>
            $('html, body').animate({
                scrollTop: $(document).height()
            }, 'slow');
        </script>
    {% endif %}

    <script>
        $('.add_more_links').click(function () {
            $('html, body').animate({
                scrollTop: $(document).height()
            }, 'slow');
            return false;
        });
    </script>

{% endblock %}